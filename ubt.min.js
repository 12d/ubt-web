(function(){"use strict";var t=function(){var t="";for(var e=0;e<4;e++){t+="0000000".concat(Math.floor(Math.random()*2821109907456).toString(36)).slice(-8)}return t};var e="https://web-ubt.ele.me/par.gif";var r="https://web-ubt.ele.me/tracking.gif";var n=function(t,e){this.type=t||"UNKNOWN";this.params=e||{}};n.prototype.bindData=function(){var t=function(){};t.prototype=this.params;var e=new t;for(var r=0;r<arguments.length;r++){var a=arguments[r];for(var i in a){e[i]=a[i]}}return new n(this.type,e)};n.prototype.bindType=function(t){return new n(t,this.params)};n.prototype.bind=function(){var t=Array.prototype.slice.call(arguments);var e=typeof t[0]==="string"?t.shift():this.type;var r=this.bindData.apply(this,t).params;return new n(e,r)};n.prototype.send=function(){var n=this.bind.apply(this,arguments);var i=n.params;var o=i.type=n.type;var u;if(o==="PV"){u=r;a.params.pvhash=t()}else{u=e}for(var c in i){var s=i[c];if(typeof s==="function"){i[c]=s()}else{i[c]=i[c]}}var f=encodeURIComponent(JSON.stringify(i));(new Image).src=u+"?"+f};var a=new n("DEFAULT",new function(){this.ssid=document.cookie.match(/(?:^|; )ubt_ssid=(.*?)(?:; |$)|$/)[1];if(!this.ssid){var e=new Date((new Date).getTime()+480*6e4);this.ssid=t()+"_"+[e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()].join("-").replace(/\b\d\b/g,"0$&");var r=document.domain.match(/[\w-]+\.?[\w-]+$/)[0];document.cookie="ubt_ssid="+this.ssid+"; Expires=Wed, 31 Dec 2098 16:00:00 GMT; Domain="+r+"; Path=/"}});var i=document.documentElement;a.send("PV",{resolution:Math.max(i.clientWidth,window.innerWidth||0)+"x"+Math.max(i.clientHeight,window.innerHeight||0),location:location.href,referrer:document.referrer});var o=function(t,e,r){var n=function(t){t=t||event;var e={target:t.target||t.srcElement};r.call(e.target,e)};if(t.addEventListener){t.addEventListener(e,n,true)}else if(t.attachEvent){t.attachEvent("on"+e,n)}};var u=function(){setTimeout(function(){var t=performance.timing;var e=["fetchStart","connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","loadEventEnd","loadEventStart","requestStart","responseEnd","responseStart"];var r={};for(var n=0;n<e.length;n++){r[e[n]]=t[e[n]]-t.navigationStart}a.send("TIMING",r)})};if(window.performance&&window.performance.timing)o(window,"load",u);var c=function(t){if(t===void 0)t=null;if(typeof t!=="string")return t;return String(t).replace(/^\s*|\s*$/g,"").replace(/\s+/g," ").replace(/^(.{7})(.{7,})(.{7})$/,function(t,e,r,n){return e+"("+r.length+")"+n})};var s=function(t,e){for(var r=t;r&&r.nodeType===1;r=r.parentNode){if(e(r)===false)break}};var f=function(t){var e;if(t.tagName==="INPUT"){e=t.id&&document.querySelector('[for="'+t.id+'"]');if(!e){s(t,function(t){if(t.tagName!=="LABEL"&&!t.hasAttribute("ubt-label"))return;e=t;return false})}if(e)t=e}var r;if(!/TEXTAREA|SELECT/.test(t.tagName))r=String(t.textContent||t.innerText||"").replace(/^\s+|\s+$/g,"");return r||t.title||t.alt||t.name||t.getAttribute("placeholder")};var d=function(t){var e;switch(t.tagName){case"A":return t.getAttribute("href");case"INPUT":if(/checkbox|radio/.test(t.type))return t.checked;case"TEXTAREA":return t.value;case"SELECT":var r=t.getElementsByTagName("option");for(var n=0;n<r.length;n++){if(r[n].selected){return r[n].hasAttribute("value")?r[n].getAttribute("value"):r[n].innerHTML}}return null;default:if(t.tagName==="LABEL"||t.hasAttribute("ubt-label")){var a=t.getAttribute("for");var e=a?document.getElementById(a):t.querySelector("input,textarea");return e?d(e):null}}};var v="ubt-click";var l=function(t){var e=t.getAttribute(v);var r=d(t);var n=f(t);a.send("EVENT",{name:e,action:"click",message:c(n),value:c(r)})};o(document,"click",function(t){var e=t.target;if(e.tagName==="LABEL"&&e.querySelector("input,textarea"))return;s(e,function(t){if(t.hasAttribute(v))l(t)})});var m="ubt-change";var g=m+"-installed";var p=function(t,e){o(t,"change",function(t){var r=d(t.target);var n=f(t.target);a.send("EVENT",{name:e,action:"change",value:c(r),message:c(n)})})};var h=["input","textarea","select"];var E=function(t){if(t[g])return;t[g]=true;p(t,t.getAttribute(m))};var b=function(t){var e=t.target;if(!new RegExp(h.join("|"),"i").test(e.tagName)){var r=e.tagName==="LABEL"&&e;if(!r){s(e,function(t){r=t.tagName==="LABEL"&&t;if(r)return false})}if(r){var n=r.getAttribute("for");var e=n?document.getElementById(n):r.querySelector(h)}}if(e&&e.hasAttribute(m))E(e)};o(document,"mousedown",b);o(document,"keydown",b);var w={};var y=10;var T=function(t){if(!t||w[t]||y<=0)return;a.send("JSERROR",{message:t});w[t]=true;y--};if(window.addEventListener){addEventListener("error",function(t){T(t.error&&t.error.stack)})}else if(window.attachEvent){attachEvent("onerror",function(t,e,r){T([t,"url: "+e,"line: "+r].join("\r\n"))})}void function(){switch(true){case typeof angular==="object"&&typeof angular.module==="function":return angular.module("UBT",[]).factory("UBT",function(){return a});default:[eval][0]("var UBT");window.UBT=a}}()}).call(this);