var UBT=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(5),n(14),n(19),n(18)},function(t,e,n){var r=n(11),o="https://web-ubt.ele.me/par.gif",i="https://web-ubt.ele.me/tracking.gif",a=function(t,e){this.type=t||"UNKNOWN",this.params=e||{}};a.prototype.bindData=function(){var t=function(){};t.prototype=this.params;for(var e=new t,n=0;n<arguments.length;n++){var r=arguments[n];for(var o in r)e[o]=r[o]}return new a(this.type,e)},a.prototype.bindType=function(t){return new a(t,this.params)},a.prototype.bind=function(){var t=Array.prototype.slice.call(arguments),e="string"==typeof t[0]?t.shift():this.type,n=this.bindData.apply(this,t).params;return new a(e,n)},a.prototype.send=function(){var t,e=this.bind.apply(this,arguments),n=e.params,a=n.type=e.type;"PV"===a?(t=i,u.params.pvhash=r()):t=o;for(var c in n){var s=n[c];"function"==typeof s?n[c]=s():n[c]=n[c]}if("debug"===document.cookie.match(/(?:; |^)UBT=([^;]*)|$/)[1])console.log(n);else{var d=encodeURIComponent(JSON.stringify(n));(new Image).src=t+"?"+d}};var u=new a("DEFAULT",new function(){var t=/(?:[\w-]+\.)?[\w-]+$|$/i.exec(document.domain||"")[0];if(t)this.ssid=document.cookie.match(/(?:^|; )ubt_ssid=(.*?)(?:; |$)|$/)[1];else try{this.ssid=localStorage.getItem("ubt_ssid")}catch(e){setTimeout(function(){throw o})}if(!this.ssid){var n=new Date((new Date).getTime()+288e5);if(this.ssid=r()+"_"+[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()].join("-").replace(/\b\d\b/g,"0$&"),t)document.cookie="ubt_ssid="+this.ssid+"; Expires=Wed, 31 Dec 2098 16:00:00 GMT; Domain="+t+"; Path=/";else try{localStorage.setItem("ubt_ssid",this.ssid)}catch(o){setTimeout(function(){throw o})}}this.timestamp=function(){return(new Date).getTime().toString(36)}}),c=document.documentElement;u.send("PV",{resolution:Math.max(c.clientWidth,window.innerWidth||0)+"x"+Math.max(c.clientHeight,window.innerHeight||0),location:location.href,referrer:document.referrer}),t.exports=u},function(t,e,n){var r=n(10),o=n(9);t.exports=function(t){var e,n,i={value:r(t),message:o(t)},a=t.attributes;for(n=0;n<a.length;n++)e=a[n],/^ubt-data-(\w+)/.test(e.name)&&(i[RegExp.$1]=e.value);return i}},function(t,e){t.exports=function(t,e,n){var r=function(t){t=t||event;var e={target:t.target||t.srcElement};n.call(e.target,e)};t.addEventListener?t.addEventListener(e,r,!0):t.attachEvent&&t.attachEvent("on"+e,r)}},function(t,e){t.exports=function(t,e){for(var n=t;n&&1===n.nodeType&&e(n)!==!1;n=n.parentNode);}},function(t,e,n){t.exports=n(1),n(13),n(12),n(7),n(6),n(8)},function(t,e,n){var r=n(1),o=n(3),i=n(4),a=n(2),u="ubt-change",c=u+"-installed",s=function(t,e){o(t,"change",function(t){r.send("EVENT",{id:t.target.getAttribute(u),params:a(t.target)})})},d=["input","textarea","select"],f=function(t){t[c]||(t[c]=!0,s(t,t.getAttribute(u)))},m=function(t){var e=t.target;if(!new RegExp(d.join("|"),"i").test(e.tagName)){var n="LABEL"===e.tagName&&e;if(n||i(e,function(t){return n="LABEL"===t.tagName&&t,n?!1:void 0}),n)var r=n.getAttribute("for"),e=r?document.getElementById(r):n.querySelector(d)}e&&e.hasAttribute(u)&&f(e)};o(document,"mousedown",m),o(document,"keydown",m)},function(t,e,n){var r=n(1),o=n(3),i=n(4),a=n(2),u="ubt-click",c=function(t){r.send("EVENT",{id:t.getAttribute(u),params:a(t)})};o(document,"click",function(t){var e=t.target;"LABEL"===e.tagName&&e.querySelector("input,textarea")||i(e,function(t){t.hasAttribute(u)&&c(t)})})},function(t,e,n){var r=n(1),o=n(2),i="ubt-visit",a={},u=function(t){var e=t.getAttribute(i);a[e]||(r.send("EVENT",{id:e,params:o(t)}),a[e]=!0),t.removeAttribute(i)},c=function(t){t.offsetWidth+t.offsetHeight&&u(t)},s=function(){for(var t=document.querySelectorAll("["+i+"]"),e=0;e<t.length;e++)c(t[e]);setTimeout(s,800)};s()},function(t,e,n){var r=n(4);t.exports=function(t){var e;"INPUT"===t.tagName&&(e=t.id&&document.querySelector('[for="'+t.id+'"]'),e||r(t,function(t){return"LABEL"===t.tagName||t.hasAttribute("ubt-label")?(e=t,!1):void 0}),e&&(t=e));var n;return/TEXTAREA|SELECT/.test(t.tagName)||(n=String(t.textContent||t.innerText||"").replace(/^\s+|\s+$/g,"")),n||t.title||t.alt||t.name||t.getAttribute("placeholder")}},function(t,e){var n=function(t){var e;switch(t.tagName){case"A":return t.getAttribute("href");case"INPUT":if(/checkbox|radio/.test(t.type))return t.checked;case"TEXTAREA":return t.value;case"SELECT":for(var r=t.getElementsByTagName("option"),o=0;o<r.length;o++)if(r[o].selected)return r[o].hasAttribute("value")?r[o].getAttribute("value"):r[o].innerHTML;return null;default:if("LABEL"===t.tagName||t.hasAttribute("ubt-label")){var i=t.getAttribute("for"),e=i?document.getElementById(i):t.querySelector("input,textarea");return e?n(e):null}}};t.exports=n},function(t,e){t.exports=function(){for(var t="",e=0;4>e;e++)t+="0000000".concat(Math.floor(2821109907456*Math.random()).toString(36)).slice(-8);return t}},function(t,e,n){var r=n(1),o={},i=10,a=function(t){!t||o[t]||0>=i||(r.send("JSERROR",{message:t}),o[t]=!0,i--)};window.addEventListener?addEventListener("error",function(t){a(t.error&&t.error.stack)}):window.attachEvent&&attachEvent("onerror",function(t,e,n){a([t,"url: "+e,"line: "+n].join("\r\n"))})},function(t,e,n){var r=n(1),o=n(3),i=function(){setTimeout(function(){for(var t=performance.timing,e=["fetchStart","connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","loadEventEnd","loadEventStart","requestStart","responseEnd","responseStart"],n={},o=0;o<e.length;o++)n[e[o]]=t[e[o]]-t.navigationStart;r.send("TIMING",n)})};window.performance&&window.performance.timing&&o(window,"load",i)},function(t,e,n){var r=n(17);t.exports=r.module("UBT",[]).factory("UBT",["$rootScope",function(t){return n(5).bindData({user_id:function(){return t.user&&t.user.id},geohash:function(){try{return localStorage.getItem("GEOHASH")||""}catch(t){return""}}})}])},,,function(t,e){t.exports=new Function("return this")().angular},function(t,e,n){n(14).config(["$httpProvider",function(t){var e=5e3;t.interceptors.push(["$q","UBT",function(t,n){var r=function(t){return t.customData={beginstamp:new Date,config:t,timer:setTimeout(function(){n.send("APITIMEOUT",{url:t.url,timeout:e})},e)},t},o=function(e){var r=e.config,o=n.bind({status:e.status,url:r.url,duration:new Date-r.customData.beginstamp});clearTimeout(r.customData.timer),[/^\/v1\/restaurant$/,/^\/restapi\/v1\/user$/].some(function(t){return t.test(r.url)})&&setTimeout(function(){return o.send("API")});var i=t.defer(),a=e.status/100|0;return 2===a?i.resolve(e):(5===a&&setTimeout(function(){return o.send("SERVERERROR")}),i.reject(e)),i.promise};return{request:r,response:o,responseError:o}}])}])},function(t,e,n){n(14).run(["UBT","$rootScope",function(t,e){var n=document.referrer,r=document.documentElement,o=function(){t.send("PV",{resolution:Math.max(r.clientWidth,window.innerWidth||0)+"x"+Math.max(r.clientHeight,window.innerHeight||0),location:location.href,referrer:n}),n=location.href};e.$on("$routeChangeSuccess",o),e.$on("$stateChangeSuccess",o)}])}]);